<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Position Analysis - Football Scout Tool</title>
    <link rel="stylesheet" href="static/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <h1 class="logo">⚽ Football Scout Tool</h1>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="compare.html">Compare Players</a></li>
                <li><a href="explore.html">Explore</a></li>
                <li><a href="similar.html">Similar Players</a></li>
                <li><a href="analysis.html" class="active">Analysis</a></li>
            </ul>
        </div>
    </nav>

    <main class="container">
        <section class="page-header">
            <h1>Position Analysis</h1>
            <p>Top performers and league comparisons by position</p>
        </section>

        <!-- Interactive Player Filter Section -->
        <section class="filters-section">
            <h2>Player Filter</h2>
            <p style="color: #6b7280; margin-bottom: 1rem;">Filter players by position, league, age, and performance metrics</p>
            <div class="filter-grid">
                <div class="filter-group">
                    <label for="position-filter">Position</label>
                    <select id="position-filter" multiple>
                        <option value="GK">Goalkeeper</option>
                        <option value="DF">Defender</option>
                        <option value="MF" selected>Midfielder</option>
                        <option value="FW">Forward</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="league-filter">League</label>
                    <select id="league-filter" multiple>
                        <option value="all" selected>All Leagues</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="age-filter">Max Age</label>
                    <input type="number" id="age-filter" min="15" max="45" value="40" placeholder="e.g., 23">
                    <small style="color: #6b7280; font-size: 0.75rem;">Players ≤ this age</small>
                </div>
                <div class="filter-group">
                    <label for="x-metric">X-Axis Metric</label>
                    <select id="x-metric">
                        <option value="PrgC_per90" selected>Progressive Carries per 90</option>
                        <option value="Gls_per90">Goals per 90</option>
                        <option value="Ast_per90">Assists per 90</option>
                        <option value="xG_per90">xG per 90</option>
                        <option value="xAG_per90">xAG per 90</option>
                        <option value="Tkl_per90">Tackles per 90</option>
                        <option value="Touches_per90">Touches per 90</option>
                        <option value="Cmp%">Pass Completion %</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="y-metric">Y-Axis Metric</label>
                    <select id="y-metric">
                        <option value="xGxAG_per90" selected>xG + xAG per 90</option>
                        <option value="Gls_per90">Goals per 90</option>
                        <option value="Ast_per90">Assists per 90</option>
                        <option value="xG_per90">xG per 90</option>
                        <option value="xAG_per90">xAG per 90</option>
                        <option value="Tkl_per90">Tackles per 90</option>
                        <option value="Touches_per90">Touches per 90</option>
                        <option value="Cmp%">Pass Completion %</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="metric-min">Min X-Axis Value</label>
                    <input type="number" id="metric-min" min="0" step="0.1" value="0" placeholder="e.g., 2.0">
                    <small style="color: #6b7280; font-size: 0.75rem;">X-metric ≥ this value</small>
                </div>
            </div>
            <button class="btn" onclick="updateAnalysisChart()">Update Chart</button>
            <span id="results-count" style="margin-left: 1rem; color: #6b7280;"></span>
        </section>

        <section class="visualization-section">
            <h2>Filtered Players</h2>
            <div id="analysis-chart"></div>
        </section>

        <section class="visualization-section">
            <h2>Top Goalkeepers</h2>
            <iframe src="static/charts/top_gk.html" width="100%" height="600" frameborder="0"></iframe>
        </section>

        <section class="visualization-section">
            <h2>Top Defenders</h2>
            <iframe src="static/charts/top_df.html" width="100%" height="600" frameborder="0"></iframe>
        </section>

        <section class="visualization-section">
            <h2>Top Midfielders</h2>
            <iframe src="static/charts/top_mf.html" width="100%" height="600" frameborder="0"></iframe>
        </section>

        <section class="visualization-section">
            <h2>Top Forwards</h2>
            <iframe src="static/charts/top_fw.html" width="100%" height="600" frameborder="0"></iframe>
        </section>

        <section class="visualization-section">
            <h2>League Comparison: Tackles per 90</h2>
            <iframe src="static/charts/league_tackles.html" width="100%" height="600" frameborder="0"></iframe>
        </section>

        <section class="visualization-section">
            <h2>League Comparison: Pass Completion %</h2>
            <iframe src="static/charts/league_passing.html" width="100%" height="600" frameborder="0"></iframe>
        </section>

        <section class="info-box">
            <h3>Position-Specific Metrics</h3>
            <ul>
                <li><strong>Goalkeepers:</strong> Evaluated by saves, save percentage, clean sheets, and distribution</li>
                <li><strong>Defenders:</strong> Focus on tackles, interceptions, blocks, and progressive passing</li>
                <li><strong>Midfielders:</strong> Balanced metrics including goal contributions, progressive carries, and defensive actions</li>
                <li><strong>Forwards:</strong> Primarily attacking metrics like goals, expected goals, and shots</li>
            </ul>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 Football Scout Tool | DS209 Final Project | UC Berkeley</p>
        </div>
    </footer>

    <script src="static/js/analysis.js"></script>
</body>
</html>
